import{w as l}from"./index.80453e5b.js";import{a as e,g as o}from"./axios.955f41b0.js";import{U as u}from"./index.9c08ea04.js";const n={user:null,error:"",loading:!1},i=l(n),r=s=>{i.update(t=>({...t,...s}))},d=async()=>{const{loading:s,user:t}=u(i);if(s)return t;r({loading:!0});try{const{data:a}=await e.get("/auth/user");return r(a?{user:a,error:""}:{user:!1,error:""}),a}catch{return r({user:!1}),!1}finally{r({loading:!1})}},y=async(s,t)=>{r({error:"",loading:!0});try{const{data:a}=await e.post("/auth/signin",{email:s,password:t});r({user:a,error:""})}catch(a){r({error:o(a)})}finally{r({loading:!1})}},p=async()=>{r({loading:!0});try{await e.post("/auth/signout"),r(n)}catch(s){r({error:o(s)})}finally{r({loading:!1})}},h=async(s,t)=>{r({error:"",loading:!0});try{const{data:a}=await e.post("/auth/signup",{email:s,password:t});r({user:a,error:""})}catch(a){r({error:o(a)})}finally{r({loading:!1})}},m=()=>{r({error:"",loading:!1})};export{i as a,p as b,m as c,h as d,d as g,y as s};
